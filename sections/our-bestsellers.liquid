<section class="our-bestsellers">
  <div class="site-wrap">
    <div class="bestseller-header">
      <div class="content">
        <h2>{{ section.settings.heading }}</h2>
        <p>{{ section.settings.content }}</p>
      </div>
      <div class="view-all">
        <a class="button" href="{{ section.settings.button_link }}">{{ section.settings.button_text }}</a>
      </div>
    </div>
    <div class="bestseller-wrapper">
      <div class="bestseller-products">
        {% assign bestseller_collection = collections[section.settings.collection] %}
        {% if bestseller_collection.products.size > 0 %}
          <ul class="bestsellers">
            {% assign limited_products = bestseller_collection.products %}
            {% for product in limited_products limit:3 %}
              <li>
                {% render 'card-product', card_product: product %}
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p>No bestsellers found.</p>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% schema %}
  {
    "name": "Our Bestsellers",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading"
      },
      {
        "type": "text",
        "id": "content",
        "label": "Content"
      },
      {
        "type": "text",
        "id": "button_text",
        "label": "Button Text"
      },
      {
        "type": "url",
        "id": "button_link",
        "label": "Button Link"
      },
      {
        "type": "collection",
        "label": "Select Collection",
        "id": "collection",
      },
    ],
    "presets": [
      {
        "name": "Our Bestsellers",
      }
    ]
  }
{% endschema %}