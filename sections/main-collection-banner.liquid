{%- style -%}
  @media screen and (max-width: 749px) {
    .collection-hero--with-image .collection-hero__inner {
      padding-bottom: calc({{ settings.media_shadow_vertical_offset | at_least: 0 }}px + 2rem);
    }
  }
  {% if collection.template_suffix == "no-images" or collection.template_suffix == "no-range" %}
  #hero .hero-text-center{
    justify-content: center;
  }
 #hero .image-text-split__content__container{
    text-align: center;
    justify-content: center
  }
  {% endif %}
{%- endstyle -%}

{% assign collectionIdentifier = '' %}
{% if page %}
    {% assign title = page.metafields.hero.title %}
    {% assign content = page.metafields.hero.content %}
    {% assign link_text = page.metafields.hero.link_text %}
    {% assign link = page.metafields.hero.link %}
    {% assign image_small = page.metafields.hero.image_small %}
    {% assign image_large = page.metafields.hero.image_large %}
    {% assign image_alt = page.metafields.hero.image_alt %}
    {% unless page.metafields.hero.background_colour == blank %}
        {% assign background_colour = page.metafields.hero.background_colour %}
    {% endunless %}
{% elsif collection %}

	{% assign collectionIdentifier = 'collection-hero' %}

    {% if collection.title %}
        {% assign title = collection.title %}
    {% elsif collection.metafields.hero.title %}
        {% assign title = collection.metafields.hero.title %}
    {% elsif collection.title %}
        {% assign title = collection.title %}
    {% else %}
        {% assign title = shop.metafields.collection_all_hero.title %}
    {% endif %}

    {% if collection.metafields.hero.content %}
        {% assign content = collection.metafields.hero.content %}
    {% elsif collection.description %}
        {% assign content = collection.description %}
    {% else %}
        {% assign content = shop.metafields.collection_all_hero.content %}
    {% endif %}

    {% if collection.metafields.hero.link_text %}
        {% assign link_text = collection.metafields.hero.link_text %}
    {% else %}
        {% assign link_text = shop.metafields.collection_all_hero.link_text %}
    {% endif %}

    {% if collection.metafields.hero.link %}
        {% assign link = collection.metafields.hero.link %}
    {% else %}
        {% assign link = shop.metafields.collection_all_hero.link %}
    {% endif %}

    {% if collection.metafields.collection.read_more_content %}
        {% assign link = '#collection-read-more' %}
        {% assign link_text = 'sections.collection_template.read_more' | t %}
    {% endif %}

    {% if collection.metafields.hero.image_small or 
          collection.metafields.hero.image_large or 
          collection.metafields.hero.image_alt%}
         {% assign image_small = collection.metafields.hero.image_small %}
         {% assign image_large = collection.metafields.hero.image_large %}
         {% assign image_alt = collection.metafields.hero.image_alt %}
    {% elsif collection.image %}
        {% assign image_small = collection.image | img_url: '792x' %}
        {% assign image_large = collection.image | img_url: '960x' %}
        {% assign image_alt = collection.title %}
    {% else %}
        {% assign image_small = shop.metafields.collection_all_hero.image_small %}
        {% assign image_large = shop.metafields.collection_all_hero.image_large %}
        {% assign image_alt = shop.metafields.collection_all_hero.image_alt %}
    {% endif %}

    {% if collection.handle == 'all' %}
        {% unless shop.metafields.collection_all_hero.background_colour == blank %}
            {% assign background_colour = shop.metafields.collection_all_hero.background_colour %}
        {% endunless %}
    {% else %}
        {% unless collection.metafields.hero.background_colour == blank %}
            {% assign background_colour = collection.metafields.hero.background_colour %}
        {% endunless %}
    {% endif %}
{% elsif template.name == 'list-collections' %}
    {% assign title = shop.metafields.collection_list_hero.title %}
    {% assign content = shop.metafields.collection_list_hero.content %}
    {% assign link_text = shop.metafields.collection_list_hero.link_text %}
    {% assign link = shop.metafields.collection_list_hero.link %}
    {% assign image_small = shop.metafields.collection_list_hero.image_small %}
    {% assign image_large = shop.metafields.collection_list_hero.image_large %}
    {% assign image_alt = shop.metafields.collection_list_hero.image_alt %}
    {% unless shop.metafields.collection_list_hero.background_colour == blank %}
        {% assign background_colour = shop.metafields.collection_list_hero.background_colour %}
    {% endunless %}
{% endif %}
  {% if background_colour == 'Dark' %}<style>
    nav.breadcrumbs {
    color: #fff;
    }
    </style>{% endif %}
<section id="hero" class="{{ collectionIdentifier }} image-text-split image-text-split--hero{% if background_colour == 'Dark' %} image-text-split--dark{% endif %}">
	<div class="site-wrap site-wrap--max">
		<div class="image-text-split__wrap {% if collection.template_suffix == "no-images" or collection.template_suffix == "no-range" %}hero-text-wrap-centre hero-text-center{% endif %}" style="background-color:{{section.settings.background_accent}}">
			<!-- {% unless collection.template_suffix == "no-images" or collection.template_suffix == "no-range"%}
				{% unless
					image_small == blank
					and image_large == blank
				%}
					<div class="image-text-split__image image-text-split__image--hero">
						{% render 'picture-responsive'
							image: collection.image,
							image_class: ''
							alt: collection.image.alt
						%}
					</div>
				{% endunless %}
			{% endunless %} -->
			{% unless
				title == blank
				and content == blank
				and link_text == blank
				and link == blank
			%}
				<div class="image-text-split__content image-text-split__content--hero">
					<div class="image-text-split__content__container">
						<div class="image-text-split__content__inner">
							{% unless title == blank %}
								<h1 class="title image-text-split__title twoliner">
									{{- title -}}
								</h1>
							{% endunless %}
							{% unless content == blank %}
								<div class="para image-text-split__para twoliner_para">
									{{- content -}}
								</div>
							{% endunless %}
							{% unless link_text == blank %}
								<a {% if collection.metafields.collection.read_more_content %}data-scroll{% endif %} class="twoliner_button" onclick="toggleReadMore()">
									{{- link_text -}}
								</a>
							{% endunless %}
						</div>
					</div>
				</div>
			{% endunless %}
            {% assign image_meta = collection.metafields.custom.related_collection_image.value %}
            {% assign link_meta = collection.metafields.custom.related_collection_link.value %}
            {% assign title_meta = collection.metafields.custom.related_collection_name.value %}
            
            {% if title_meta != blank %}
            <div class="main_relatedcollection--wrapper related-collection-{{ section.id }}">
              <div class="main_relatedcollection--container">
                <div class="related_collection--inner">
                  
                  {% for image in image_meta %}
                    <a href="{{link_meta[forloop.index0]  }}" class="link_related-collection">
                      <div class="main-related-collection">
                        <div class="related-collection_image">
                          <img
                            src="{{ image.src | image_url: width:250 , height:250  }}"
                            height="{{ image.height }}"
                            width="{{ image.width }}"
                            alt="{{ title_meta[forloop.index0] }}"
                          >
                        </div>
                        <div class="related-collection_name">
                          {{ title_meta[forloop.index0] }}
                        </div>
                      </div>
                    </a>
                  {% endfor %}
                </div>
              </div>
            </div>
            {% endif %}
		</div>
	</div>
</section>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        resourceManager.loadResourceOnInteractive([
            { "name": "script", "url": "{{ 'dn_lazy.js' | asset_url }}" },
        ], {
            triggerEvents: {
                readyInteractive: true,
                elementsIntersection: '.wool-range-filter-wrap'
            }
        });
    });
    document.addEventListener('DOMContentLoaded', function () {
        const content = document.querySelector('.image-text-split__content__inner .para');
        const button = document.querySelector('.image-text-split__content__inner .twoliner_button');
        if (content.scrollHeight > 20) { // Check if the content height exceeds the visible area
            button.style.display = 'inline-block'; // Show the "Read More" button
        }
    });
    
    function toggleReadMore() {
        const content = document.querySelector('.image-text-split__content__inner .para');
        const button = document.querySelector('.image-text-split__content__inner .twoliner_button');
    
        // Detect screen size (mobile vs desktop)
        const isMobile = window.innerWidth <= 768;
    
        if (isMobile) {
            // Mobile-specific behavior
            if (content.style.overflow === 'hidden') {
                content.style.overflow = 'visible';
                content.style.maxHeight = 'none';
                button.textContent = 'Read Less';
            } else {
                content.style.overflow = 'hidden';
                content.style.maxHeight = '100px'; // Adjust maxHeight for mobile devices
                button.textContent = 'Read More';
            }
        } else {
            // Desktop-specific behavior
            if (content.style.overflow === 'hidden') {
                content.style.overflow = 'visible';
                content.style.maxHeight = 'none';
                button.textContent = 'Read Less';
            } else {
                content.style.overflow = 'hidden';
                content.style.maxHeight = '20px'; // Adjust maxHeight for desktop devices
                button.textContent = 'Read More';
            }
        }
    }
</script>


{% schema %}
{
  "name": "Collection Banner",
  "class": "section",
  "settings": [
    {
      "type": "paragraph",
      "content": "t:sections.main-collection-banner.settings.paragraph.content"
    },
    {
      "type": "checkbox",
      "id": "show_collection_description",
      "default": true,
      "label": "t:sections.main-collection-banner.settings.show_collection_description.label"
    },
    {
      "type": "checkbox",
      "id": "show_collection_image",
      "default": false,
      "label": "t:sections.main-collection-banner.settings.show_collection_image.label",
      "info": "t:sections.main-collection-banner.settings.show_collection_image.info"
    },
    {
      "type": "color",
      "id": "background_accent",
      "label": "Section Background Color",
      "default": "#1B2C3D"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "background-1",
          "label": "t:sections.all.colors.background_1.label"
        },
        {
          "value": "background-2",
          "label": "t:sections.all.colors.background_2.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        }
      ],
      "default": "background-1",
      "label": "t:sections.all.colors.label"
    }
  ]
}
{% endschema %}