class ProductUpsells extends HTMLElement{constructor(){super(),this.submitButton=this.querySelector(".button--submit"),this.variantId=this.submitButton.dataset.upsellsProductId,this.quantity=this.querySelector(".product-upsells__input"),this.cartButton=document.querySelector('[data-cart="button"]'),this.cartCount=document.querySelector('[data-cart="count"]'),this.cartWording=document.querySelector('[data-cart="wording"]'),null!==this.submitButton&&this.submitButton.addEventListener("click",()=>this.addToCart())}addToCart(){var t={items:[{quantity:Number(this.quantity.value),id:this.variantId}]};fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(t=>t.json()).then(t=>{t.status||(console.log("Product added to cart"),this.updateCartIcon())}).catch(t=>{console.error("Error = ",t)})}async updateCartIcon(){var e=await this.getCart(),s=[];for(let t=0;t<e.length;t++){var r=e[t].quantity;s.push(r)}var t=e.length;this.cartButton.classList.add("site-header__cart--has-items"),this.cartCount.textContent=t,1<Number(t)?this.cartWording.textContent="items":this.cartWording.textContent="item"}async getCart(){return new Promise(e=>{fetch("/cart.js").then(t=>t.json()).then(t=>{e(t.items)}).catch(t=>console.log("error = ",t))})}}customElements.define("product-upsells",ProductUpsells);